"use strict";!function(e,n){if("function"==typeof define&&define.amd)define(["exports"],n);else if("undefined"!=typeof exports)n(exports);else{var t={exports:{}};n(t.exports),e.blocks=t.exports}}(this,function(e){function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function t(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e,n){for(var t=arguments.length,i=Array(t>2?t-2:0),o=2;t>o;o++)i[o-2]=arguments[o];var u=f({},n,r({},y,(n||{})[y]||"1"));return 1===i.length&&p(i[0])&&(i=h(i[0])),{tag:e,attrs:u,children:i.map(m(u))}}function u(e){if(l(e))return e;var n=e.attrs,r=e.children,i=void 0===r?[]:r,o=e.tag,c="function"==typeof o?(new(Function.prototype.bind.apply(o,[null].concat([a(o),n||{}],t(i))))).renderedElement:w(k(document.createElement(o),n),i.map(u));return c}Object.defineProperty(e,"__esModule",{value:!0}),e.h=o,e.render=u;var c=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),f=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},a=function(e){return("_"+e).match(/function ([A-Z]\w+)/)[1]},s=function(e){return"function"==typeof e},d=function(e,n){return s(e)&&e.bind(n)()},l=function(e){return function(e){return"string"===e||"number"===e}("undefined"==typeof e?"undefined":i(e))},p=function(e){return"object"===("undefined"==typeof e?"undefined":i(e))&&Object.keys(e).reduce(function(e,n){return e&&!isNaN(n)},!0)},h=function(e){return Object.keys(e).map(function(n){return e[n]})},y="data-blocks-id",m=function A(e){return function(n,t){if(l(n))return n;var i=f({},n.attrs,r({},y,e[y]+"."+t));return f({},n,{attrs:i,children:(n.children||[]).map(A(i))})}},v=e.$=function(e){return function(e){return e.length>1?e:e[0]}(document.querySelectorAll(e))},b=e.replace=function(e,n){return e.parentNode.replaceChild(n,e,n)},g=e.remove=function(e){return e.parentNode.removeChild(e)},k=e.setAttrs=function(e,n){return Object.keys(n||{}).reduce(function(e,t){var r=/^on([A-Z]\w+)$/;return r.test(t)?e.addEventListener(t.match(r)[1].toLowerCase(),n[t]):e.setAttribute(t,n[t]),e},e)},w=e.append=function(e,n){return n.reduce(function(e,n,t){return n instanceof window.HTMLElement?e.appendChild(n):e.appendChild(document.createTextNode(""+n)),e},e)};e.dumpHTML=function(e){return w(document.createElement("div"),[e]).innerHTML},e.mount=function(e,n,t){return new e(""+(n.id+a(e)),t).mount(n)},e.Component=function(){function e(t,r){n(this,e),this.id=t,this.state={},this.props=f({},r);for(var i=arguments.length,o=Array(i>2?i-2:0),u=2;i>u;u++)o[u-2]=arguments[u];this.children=o}return c(e,[{key:"setState",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.state=f({},this.state,e),this.update()}},{key:"mount",value:function(e){this.unmount(),d(this.onMount,this),w(e,[this.renderedElement])}},{key:"unmount",value:function(){d(this.onUnmount,this),this.self&&g(this.self)}},{key:"update",value:function(){d(this.onUpdate,this),this.self&&b(this.self,this.renderedElement)}},{key:"self",get:function(){return v("["+y+"="+this.props[y]+"]")}},{key:"renderedElement",get:function(){var e=o("div",r({},y,this.props[y]),[this.render(this.props)]);return u(e.children[0])}}]),e}()});