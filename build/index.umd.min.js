"use strict";!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.blocks=n.exports}}(this,function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function i(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),i=2;n>i;i++)o[i-2]=arguments[i];var u=f({},t,r({},a,(t||{})[a]||"1"));return 1===o.length&&g(o[0])&&(o=k(o[0])),{tag:e,attrs:u,children:o.map(A(u))}}function u(e){if(b(e))return e;var t=e.tag,r=e.attrs,o=e.children,i=void 0===o?[]:o,c="function"==typeof t?(new(Function.prototype.bind.apply(t,[null].concat([y(t),r||{}],n(i))))).renderedElement:h(p(document.createElement(t),r),i.map(u));return c}Object.defineProperty(e,"__esModule",{value:!0}),e.h=i,e.render=u;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="blocks-id",s=e.$=function(e){return function(e){return e.length>1?e:e[0]}(document.querySelectorAll(e))},l=e.replace=function(e,t){return e.parentNode.replaceChild(t,e,t)},d=e.remove=function(e){return e.parentNode.removeChild(e)},p=e.setAttrs=function(e,t){return Object.keys(t||{}).reduce(function(e,n){var r=/^on([A-Z]\w+)$/;return r.test(n)?e.addEventListener(n.match(r)[1].toLowerCase(),t[n]):e.setAttribute(n,t[n]),e},e)},h=e.append=function(e,t){return t.reduce(function(e,t,n){return t instanceof HTMLElement?e.appendChild(t):e.appendChild(document.createTextNode(""+t)),e},e)},y=(e.dumpHTML=function(e){return h(document.createElement("div"),[e]).innerHTML},e.mount=function(e,t,n){return new e(""+(t.id+y(e)),n).mount(t)},function(e){return("_"+e).match(/function ([A-Z]\w+)/)[1]}),m=function(e){return"function"==typeof e},v=function(e,t){return m(e)&&e.bind(t)()},b=function(e){return"string"==typeof e||"number"==typeof e},g=function(e){return"object"===("undefined"==typeof e?"undefined":o(e))&&Object.keys(e).reduce(function(e,t){return e&&!isNaN(t)},!0)},k=function(e){return Object.keys(e).map(function(t){return e[t]})},A=function w(e){return function(t,n){if(b(t))return t;var o=f({},t.attrs,r({},a,e[a]+"."+n));return f({},t,{attrs:o,children:(t.children||[]).map(w(o))})}};e.Component=function(){function e(n,r){t(this,e),this.id=n,this.state={},this.props=f({},r);for(var o=arguments.length,i=Array(o>2?o-2:0),u=2;o>u;u++)i[u-2]=arguments[u];this.children=i}return c(e,[{key:"setState",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.state=f({},this.state,e),this.update()}},{key:"mount",value:function(e){this.unmount(),v(this.onMount,this),h(e,[this.renderedElement])}},{key:"unmount",value:function(){v(this.onUnmount,this),this.self&&d(this.self)}},{key:"update",value:function(){v(this.onUpdate,this),this.self&&l(this.self,this.renderedElement)}},{key:"self",get:function(){return s("["+a+"="+this.props[a]+"]")}},{key:"renderedElement",get:function(){var e=i("div",r({},a,this.props[a]),[this.render(this.props)]);return u(e.children[0])}}]),e}()});