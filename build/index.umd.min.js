"use strict";!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.blocks=n.exports}}(this,function(e){function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;n>o;o++)i[o-2]=arguments[o];var u=c({},t,r({},a,t[a]||"1"));return 1!==i.length||v(i[0])||(i=b(i[0])),{tag:e,attrs:u,children:i.map(g(u))}}function o(e){if(v(e))return e;var t=e.tag,r=e.attrs,i=e.children,u=void 0===i?[]:i,c="function"==typeof t?(new(Function.prototype.bind.apply(t,[null].concat([h(t),r||{}],n(u))))).renderedElement:p(d(document.createElement(t),r),u.map(o));return c}Object.defineProperty(e,"__esModule",{value:!0}),e.h=i,e.render=o;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="blocks-id",f=e.$=function(e){return function(e){return e.length>1?e:e[0]}(document.querySelectorAll(e))},s=e.replace=function(e,t){return e.parentNode.replaceChild(t,e,t)},l=e.remove=function(e){return e.parentNode.removeChild(e)},d=e.setAttrs=function(e,t){return Object.keys(t||{}).reduce(function(e,n){var r=/^on([A-Z]\w+)$/;return r.test(n)?e.addEventListener(n.match(r)[1].toLowerCase(),t[n]):e.setAttribute(n,t[n]),e},e)},p=e.append=function(e,t){return t.reduce(function(e,t,n){return t instanceof HTMLElement?e.appendChild(t):e.appendChild(document.createTextNode(""+t)),e},e)},h=(e.dumpHTML=function(e){return p(document.createElement("div"),[e]).innerHTML},e.mount=function(e,t,n){return new e(""+(t.id+h(e)),n).mount(t)},function(e){return("_"+e).match(/function ([A-Z]\w+)/)[1]}),m=function(e){return"function"==typeof e},y=function(e,t){return m(e)&&e.bind(t)()},v=function(e){return"string"==typeof e||"number"==typeof e},b=function(e){return Object.keys(e).map(function(t){return e[t]})},g=function k(e){return function(t,n){if(v(t))return t;var i=c({},t.attrs,r({},a,e[a]+"."+n));return c({},t,{attrs:i,children:(t.children||[]).map(k(i))})}};e.Component=function(){function e(n,r){t(this,e),this.id=n,this.state={},this.props=c({},r);for(var i=arguments.length,o=Array(i>2?i-2:0),u=2;i>u;u++)o[u-2]=arguments[u];this.children=o}return u(e,[{key:"setState",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.state=c({},this.state,e),this.update()}},{key:"mount",value:function(e){this.unmount(),y(this.onMount,this),p(e,[this.renderedElement])}},{key:"unmount",value:function(){y(this.onUnmount,this),this.self&&l(this.self)}},{key:"update",value:function(){y(this.onUpdate,this),this.self&&s(this.self,this.renderedElement)}},{key:"self",get:function(){return f("["+a+"="+this.props[a]+"]")}},{key:"renderedElement",get:function(){var e=i("div",r({},a,this.props[a]),[this.render(this.props)]);return o(e.children[0])}}]),e}()});